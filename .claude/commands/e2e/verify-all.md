# E2E検証: 全機能一括検証

アプリケーションの全機能に対してE2Eテストを実行し、仕様との整合性を包括的に検証します。

## 実行手順

### 1. 環境確認
以下の環境が起動していることを確認してください：
- 開発サーバー: http://localhost:3000
- Supabase: http://127.0.0.1:54321

起動していない場合は起動を促してください。

### 2. 全テストの実行
```bash
npx playwright test --reporter=list
```

### 3. 機能ごとの仕様読み込み
以下の全機能の仕様を読み込んでください：

| 機能 | 仕様ファイル |
|------|-------------|
| auth | `.kiro/specs/auth/requirements.md` |
| timeline | `.kiro/specs/timeline/requirements.md` |
| entry-input | `.kiro/specs/entry-input/requirements.md` |
| streak | `.kiro/specs/streak/requirements.md` |
| mypage | `.kiro/specs/mypage/requirements.md` |
| notification | `.kiro/specs/notification/requirements.md` |

### 4. 包括的レポートの生成

```markdown
# E2E全機能検証レポート

## サマリー
| 機能 | テスト数 | 成功 | 失敗 | カバレッジ | ステータス |
|------|----------|------|------|------------|------------|
| auth | X | X | X | X% | ✅/⚠️/❌ |
| timeline | X | X | X | X% | ✅/⚠️/❌ |
| entry-input | X | X | X | X% | ✅/⚠️/❌ |
| streak | X | X | X | X% | ✅/⚠️/❌ |
| mypage | X | X | X | X% | ✅/⚠️/❌ |
| notification | X | X | X | X% | ✅/⚠️/❌ |
| **合計** | **X** | **X** | **X** | **X%** | |

## ステータス定義
- ✅ 全テスト成功 & カバレッジ80%以上
- ⚠️ テスト成功だがカバレッジ不足 または 軽微な問題あり
- ❌ テスト失敗 または 重大な問題あり

## 機能別詳細

### 1. 認証機能 (auth)
[詳細レポート]

### 2. タイムライン (timeline)
[詳細レポート]

### 3. 入力/編集 (entry-input)
[詳細レポート]

### 4. ストリーク (streak)
[詳細レポート]

### 5. マイページ (mypage)
[詳細レポート]

### 6. 通知 (notification)
[詳細レポート]

## 仕様未カバー項目
優先度順にリストアップ：
1. [高] [機能] - [未カバー要件]
2. [中] [機能] - [未カバー要件]
3. [低] [機能] - [未カバー要件]

## 検出された問題
### 重大 (修正必須)
- [ ] [問題1]

### 中程度 (早期修正推奨)
- [ ] [問題2]

### 軽微 (改善推奨)
- [ ] [問題3]

## 推奨アクションプラン
1. **即時対応**: [失敗テストの修正]
2. **短期**: [不足テストの追加]
3. **中期**: [カバレッジ向上]
```

### 5. 次のステップ提案

検証結果に応じて以下を提案してください：

**全て成功の場合:**
- 「全機能のE2Eテストが成功しました。本番デプロイの準備が整っています。」

**失敗がある場合:**
- `/e2e:fix [機能名]` で修正を開始することを提案
- 優先度順に修正対象を提示

**テスト不足の場合:**
- `/e2e:generate [機能名]` でテスト追加を提案
- カバレッジが低い機能から優先的に

## Phase 1 チェックリスト（docs/REQUIREMENTS.md より）

以下の項目がテストでカバーされているか確認してください：

- [ ] Next.js + Supabase + Vercel構築
- [ ] Google認証
- [ ] 入力/編集ページ
- [ ] タイムライン/カレンダーページ
- [ ] マイページ（継続記録表示）
- [ ] ストリーク/ほつれロジック
- [ ] 画像圧縮・アップロード
- [ ] PWA化
- [ ] プッシュ通知（メインリマインド）
- [ ] データエクスポートAPI
